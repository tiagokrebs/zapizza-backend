{% extends "zapizza:site/templates/base.jinja2" %}
{% block title %}ToDos List{% endblock %}
{% block content %}

  {% if msg %}
      <div class="alert alert-info">
        {{ msg }}
      </div>
  {% endif %}
    <a class="btn btn-primary pull-right"
       href="{{ request.route_url('todos_add') }}">Add</a>
    <h1>ToDos - List</h1>


    <ul class="list-group col-md-6">
      {% for todo in todos %}
        {% if request.has_permission('view', todo) %}
            <li class="list-group-item">

                <a href="{{ request.route_url('todos_view', id=todo.id) }}">
                  {{ todo.title }}
                </a>

              {% if request.has_permission('edit', todo) %}
                  <div class="btn-group  pull-right" role="group">
                      <a class="btn btn-default btn-xs"
                         href="{{ request.route_url('todos_edit', id=todo.id) }}">
                      <span class="glyphicon glyphicon-pencil"
                            aria-hidden="true"></span> edit
                      </a>
                      <a class="btn btn-default btn-xs"
                         href="{{ request.route_url('todos_delete', id=todo.id) }}">
                      <span class="glyphicon glyphicon-trash"
                            aria-hidden="true"></span> delete
                      </a>
                  </div>
              {% endif %}

            </li>
        {% endif %}
      {% endfor %}
    </ul>
{% endblock %}
